$form=null,function(a){"use strict";a(function(){a("body").on("click","#place_order",function(){function b(b,c){var d=i.querySelector("#credit-card-token"),e=i.querySelector("#credit-card-brand"),g=i.querySelector("#credit-card-expiry-month"),h=i.querySelector("#credit-card-expiry-year");d.value=b.cardToken,e.value=b.cardBrand,g.value=b.cardExpirationMonth,h.value=b.cardExpirationYear,a("input[name=rakuten_pay_fingerprint]").remove(),a("<input></input>",{type:"hidden",id:"credit-card-fingerprint",name:"rakuten_pay_fingerprint",value:c}).appendTo(f),f.removeClass("processing"),f.submit()}function c(b,c){var d=[b,c];d=a.map(d,function(a){return a}),d=a.grep(d,function(a){return"object"==typeof a&&null!=a}),a.isEmptyObject(d)?(f.removeClass("processing"),a(".woocommerce-error",h).remove(),creditCard.generateHash(function(b){a("input[name=rakuten_pay_card_hash]",f).remove(),f.append(a('<input name="rakuten_pay_card_hash" type="hidden" />').val(b)),f.submit()})):(f.removeClass("processing"),a(".woocommerce-error",h).remove(),j+='<ul class="woocommerce-error" role="alert">',a.each(d,function(a,b){j+="<li>"+b.message+"</li>"}),j+="</ul>",h.prepend("<div>"+j+"</div>"))}function d(){var b=a.Deferred();return g.tokenize(k,function(a,c){a&&b.reject(a),b.resolve(c)}),b}function e(){var b=a.Deferred();return g.fingerprint(function(a,c){a&&b.reject(a),b.resolve(c)}),b}if(!a("#payment_method_rakuten-pay-credit-card").is(":checked"))return!0;var f=a("form.checkout, form#order_review"),g=new RPay,h=a("#rakuten-pay-credit-cart-form",f),i=h.get(0),j="",k={form:i,"card-number":i.querySelector("[data-rkp='card-number']"),"card-cvv":i.querySelector("[data-rkp='card-cvv']"),"expiration-month":i.querySelector("[data-rkp='card-expiration-month']"),"expiration-year":i.querySelector("[data-rkp='card-expiration-year']")};return f.addClass("processing"),a.when(d(),e()).then(b,c),!1})}),a("#billing_birthdate").inputmask({alias:"date"}),a("#billing_document").inputmask({mask:"999.999.999-99"}),a("#billing_phone").inputmask("(99) 9999[9]-9999")}(jQuery);